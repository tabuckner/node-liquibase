"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("child_process"),n=require("path");function t(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var r,s=function(){function n(){}return n.spawnChildProcess=function(n){return console.log("Running "+n+"..."),new Promise((function(t,a){e.exec(n,(function(e,n,o){if(console.log("\n",n),e)return console.error("\n",o),a(e);t(n)}))}))},n}(),u=function(){function e(){}return a(e,null,[{key:"bundledLiquibasePath",get:function(){return this.bundledLiquibasePathForExternalConsumers}},{key:"bundledLiquibasePathForExternalConsumers",get:function(){return n.join(__dirname,"liquibase/liquibase")}},{key:"bundledLiquibasePathForInternalConsumers",get:function(){return n.join(__dirname,"../../bin/liquibase/liquibase")}}]),e}(),i={url:"jdbc:sqlserver://<IP_OR_HOSTNAME>:;database=sqlserver;",changeLogFile:"/examples/change-log-examples/mssql/changelog.xml",username:"sa",password:"",classpath:n.join(__dirname,"../../../drivers/mssql-jdbc-7.4.1.jre8.jar")},l={changeLogFile:"/node_modules/examples/change-log-examples/postgreSQL/changelog.xml",url:"jdbc:postgresql://localhost:5432/postgres",username:"postgres",password:"",classpath:n.join(__dirname,"drivers/postgresql-42.2.8.jar")},c=function(){function e(){}return e.log=function(e){console.log("[NODE-LIQUIBASE] "+e)},e.warn=function(e){console.warn("[33m%s[0m","[NODE-LIQUIBASE] "+e)},e.error=function(e){console.error("[31m%s[0m","[NODE-LIQUIBASE] "+e)},e}();(r=exports.LiquibaseCommands||(exports.LiquibaseCommands={})).CalculateCheckSum="calculateCheckSum",r.ChangelogSync="changelogSync",r.ChangelogSyncSql="changelogSyncSQL",r.ChangelogSyncToTag="changelogSyncToTag",r.ChangelogSyncToTagSql="changelogSyncToTagSQL",r.ClearCheckSums="clearCheckSums",r.DbDoc="dbDoc",r.DeactivateChangeLog="deactivateChangeLog",r.Diff="diff",r.DiffChangeLog="diffChangeLog",r.DropAll="dropAll",r.FutureRollbackSql="futureRollbackSQL",r.FutureRollbackCountSql="futureRollbackCountSQL",r.GenerateChangeLog="generateChangeLog",r.Help="help",r.History="history",r.ListLocks="listLocks",r.MarkNextChangeSetRan="markNextChangeSetRan",r.MarkNextChangeSetRanSql="markNextChangeSetRanSQL",r.RegisterChangeLog="registerChangeLog",r.ReleaseLocks="releaseLocks",r.Rollback="rollback",r.RollbackCount="rollbackCount",r.RollbackCountSql="rollbackCountSQL",r.RollbackSql="rollbackSQL",r.RollbackToDate="rollbackToDate",r.RollbackToDateSql="rollbackToDateSQL",r.Snapshot="snapshot",r.SnapshotReference="snapshotReference",r.Status="status",r.SyncHub="syncHub",r.Tag="tag",r.TagExists="tagExists",r.UnexpectedChangeSets="unexpectedChangeSets",r.Update="update",r.UpdateSql="updateSQL",r.UpdateCount="updateCount",r.UpdateCountSql="updateCountSQL",r.UpdateTestingRollback="updateTestingRollback",r.UpdateToTag="updateToTag",r.UpdateToTagSql="updateToTagSQL",r.Validate="validate";var g=function(){function e(e){this.params=e,this.mergeParamsWithDefaults(e)}var n=e.prototype;return n.update=function(e){return this.run(exports.LiquibaseCommands.Update,e)},n.updateSQL=function(e){return this.run(exports.LiquibaseCommands.UpdateSql,e)},n.updateCount=function(e){return this.run(exports.LiquibaseCommands.UpdateCount,e)},n.updateCountSQL=function(e){return this.run(exports.LiquibaseCommands.UpdateCountSql,e)},n.updateTestingRollback=function(){return this.run(exports.LiquibaseCommands.UpdateTestingRollback)},n.updateToTag=function(e){return this.run(exports.LiquibaseCommands.UpdateToTag,e)},n.updateToTagSQL=function(e){return this.run(exports.LiquibaseCommands.UpdateToTagSql,e)},n.validate=function(){return this.run(exports.LiquibaseCommands.Validate)},n.calculateCheckSum=function(e){return this.run(exports.LiquibaseCommands.CalculateCheckSum,e)},n.rollback=function(e){return this.run(exports.LiquibaseCommands.Rollback,e)},n.rollbackSQL=function(e){return this.run(exports.LiquibaseCommands.RollbackSql,e)},n.rollbackCount=function(e){return this.run(exports.LiquibaseCommands.RollbackCount,e)},n.rollbackCountSQL=function(e){return this.run(exports.LiquibaseCommands.RollbackCountSql,e)},n.rollbackToDate=function(e){return this.run(exports.LiquibaseCommands.RollbackToDate,e)},n.rollbackToDateSQL=function(e){return this.run(exports.LiquibaseCommands.RollbackToDateSql,e)},n.snapshot=function(e){return this.run(exports.LiquibaseCommands.Snapshot,e)},n.snapshotReference=function(e){return this.run(exports.LiquibaseCommands.SnapshotReference,e)},n.status=function(){return this.run(exports.LiquibaseCommands.Status)},n.syncHub=function(e){return this.run(exports.LiquibaseCommands.SyncHub,e)},n.tag=function(e){return this.run(exports.LiquibaseCommands.Tag,e)},n.tagExists=function(e){return this.run(exports.LiquibaseCommands.TagExists,e)},n.unexpectedChangeSets=function(){return this.run(exports.LiquibaseCommands.UnexpectedChangeSets)},n.dropAll=function(){return this.run(exports.LiquibaseCommands.DropAll)},n.futureRollbackSQL=function(){return this.run(exports.LiquibaseCommands.FutureRollbackSql)},n.futureRollbackCountSQL=function(e){return this.run(exports.LiquibaseCommands.FutureRollbackCountSql,e)},n.generateChangeLog=function(e){return this.run(exports.LiquibaseCommands.GenerateChangeLog,e)},n.help=function(){return this.run(exports.LiquibaseCommands.Help)},n.history=function(){return this.run(exports.LiquibaseCommands.History)},n.listLocks=function(){return this.run(exports.LiquibaseCommands.ListLocks)},n.markNextChangeSetRan=function(){return this.run(exports.LiquibaseCommands.MarkNextChangeSetRan)},n.markNextChangeSetRanSQL=function(){return this.run(exports.LiquibaseCommands.MarkNextChangeSetRanSql)},n.registerChangeLog=function(){return this.run(exports.LiquibaseCommands.RegisterChangeLog)},n.releaseLocks=function(){return this.run(exports.LiquibaseCommands.ReleaseLocks)},n.changelogSync=function(){return this.run(exports.LiquibaseCommands.ChangelogSync)},n.changelogSyncSQL=function(){return this.run(exports.LiquibaseCommands.ChangelogSyncSql)},n.changelogSyncToTag=function(e){return this.run(exports.LiquibaseCommands.ChangelogSyncToTag,e)},n.changelogSyncToTagSQL=function(e){return this.run(exports.LiquibaseCommands.ChangelogSyncToTagSql,e)},n.clearCheckSums=function(){return this.run(exports.LiquibaseCommands.ClearCheckSums)},n.dbDoc=function(e){return this.run(exports.LiquibaseCommands.DbDoc,e)},n.deactivateChangeLog=function(){return this.run(exports.LiquibaseCommands.DeactivateChangeLog)},n.diff=function(e){return this.run(exports.LiquibaseCommands.Diff,e)},n.diffChangelog=function(e){return this.run(exports.LiquibaseCommands.DiffChangeLog,e)},n.stringifyParams=function(e){var n="";for(var t in e)n+="--"+t+"="+JSON.stringify(e[t])+" ";return n},n.run=function(e,n){void 0===n&&(n={});var t=this.stringifyParams(n);return this.spawnChildProcess(this.liquibasePathAndGlobalAttributes+" "+e+" "+t)},n.spawnChildProcess=function(e){return s.spawnChildProcess(e)},n.mergeParamsWithDefaults=function(e){var n=o({},l,{liquibase:u.bundledLiquibasePath});this.params=Object.assign({},n,e)},a(e,[{key:"liquibasePathAndGlobalAttributes",get:function(){var e=this,n=""+this.params.liquibase;return Object.keys(this.params).forEach((function(t){"liquibase"!==t&&(n=n+" --"+t+'="'+e.params[t]+'"')})),n}}]),e}();exports.CommandHandler=s,exports.FileHelper=u,exports.LIQUIBASE_LABEL="[NODE-LIQUIBASE]",exports.Liquibase=g,exports.Logger=c,exports.MSSQL_DEFAULT_CONFIG=i,exports.POSTGRESQL_DEFAULT_CONFIG=l;
//# sourceMappingURL=node-liquibase.cjs.production.min.js.map
